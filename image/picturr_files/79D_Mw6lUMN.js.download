;/*FB_PKG_DELIM*/

__d("LSCreateRecoveryCode.nop",["CryptoLogger","GF32RecoveryCodes","GaloisField32","LSResult","Promise","UInt8Array"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a){while(!0){var b=d("UInt8Array").getBufferWithRandomValuesFromLength(1);b=new Uint8Array(b)[0];if(b<256-256%a)return b%a;continue}return 0}a=function(a,e){a=["2","0"].join("");try{e=[];for(var f=0;f<=33;++f)e.push(i(32));f=d("GF32RecoveryCodes").getEccForCode(d("GaloisField32").asGf32MatExn(e));e=e.concat(f);f=d("GaloisField32").matrixToSymbols(d("GaloisField32").asGf32MatExn(e));e=a+f;return(h||(h=b("Promise"))).resolve(c("LSResult")(e))}catch(a){d("CryptoLogger").captureError(d("CryptoLogger").CryptoLogger("create_recovery_code"),a).mustfix("creating recovery code failed");throw a}};a.__nop_name__="LSCreateRecoveryCode";g["default"]=a}),98);
__d("LSEncryptedBackupsCreateVirtualDeviceActionType",[],(function(a,b,c,d,e,f){a=Object.freeze({INSERT:1,UNIQUE_VD_TYPE_INSERT:2});f["default"]=a}),66);
__d("LSGenerateRecoveryCode",["LSCreateRecoveryCode.nop","LSGetViewerFBID","LSLogMebClientEvent.nop","LSParseRecoveryCode_v2.nop"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),function(a){c.logger(a).info(a)}("[EncryptedBackups][LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure] Beginning execution."),c.forEach(c.filter(c.db.table(174).fetch(),function(a){return a.recoveryCode==="1SHADOWTESTINGRECOVERYCODE00000000000000"}),function(a){return a["delete"]()})},function(a){return c.db.table(174).fetch([[[c.i64.cast([0,1])]]]).next().then(function(a,e){var f=a.done;a=a.value;return f?c.sequence([function(a){return c.nativeOperation(b("LSCreateRecoveryCode.nop")).then(function(a){return a=a,d[15]=a[0],a})},function(a){return c.db.table(174).add({pk:c.i64.cast([0,1]),recoveryCode:d[15]})},function(a){return d[1]=d[15]}]):(e=a.item,d[1]=e.recoveryCode)})},function(b){return c.forEach(c.db.table(174).fetch([[[c.i64.cast([0,1])]]]),function(b){var c=b.update;b.item;return c({virtualDeviceType:a[0],cloudServiceAccount:void 0,hsmPinNormalizationStatus:void 0})})},function(a){return d[3]=c.createArray(),c.db.table(172).fetch().next().then(function(a,b){var e=a.done;a=a.value;return e?d[4]=void 0:(b=a.item,d[16]=b.encryptionManagementDelegatorId,c.i64.neq(d[16],void 0)?(c.i64.neq(d[16],c.i64.cast([0,0]))?d[17]=c.i64.to_string(d[16]):d[17]=void 0,d[15]=d[17]):d[15]=void 0,d[4]=d[15])})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[6]=a[0],a})},function(a){return c.nativeOperation(b("LSParseRecoveryCode_v2.nop"),d[1],d[4]==null?c.i64.to_string(d[6]):d[4],d[3]).then(function(a){return a=a,d[7]=a[0],d[8]=a[1],a})},function(a){return d[9]=c.i64.of_float(Date.now()),d[10]=c.i64.random(),d[12]="Finishing execution. Execution time: ",d[13]=c.i64.to_string(c.i64.sub(d[9],d[0])),d[14]=" ms",d[11]="",function(a){c.logger(a).info(a)}(["[EncryptedBackups][LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure] ",d[11],d[12],d[11],d[13],d[11],d[14]].join("")),c.i64.eq(c.i64.mod_(d[10],c.i64.cast([0,1e3])),c.i64.cast([0,0]))?(d[15]=",",d[16]=c.createArray(),void 0!==void 0?d[17]=(d[16].push(void 0),d[16]):0,c.nativeOperation(b("LSLogMebClientEvent.nop"),"LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure",[d[12],d[15],d[13],d[15],d[14]].join(""),d[16],c.i64.cast([0,4]))):c.resolve()},function(a){return a=[d[1],c.i64.cast([0,0]),d[7]],e[0]=a[0],e[1]=a[1],e[2]=a[2],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSEncryptedBackupsGenerateRecoveryCodeStoredProcedure";a.__tables__=["secure_encrypted_backups_generated_recovery_code","encrypted_backups"];e.exports=a}),null);
__d("LSGenerateRecoveryCodeStoredProcedure",["LSGenerateRecoveryCode","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSGenerateRecoveryCode"),e.virtualDeviceType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("MWEBConnections7AndroidIcon.react",["ix","CometImageFromIXValue.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=d("react-compiler-runtime").c(5),e=a.alt,f=a.ref;a=a.xstyle;var g;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(g=h("398889"),b[0]=g):g=b[0];g=g;b[1]!==e||b[2]!==f||b[3]!==a?(g=j.jsx(c("CometImageFromIXValue.react"),{alt:e,ref:f,source:g,xstyle:a}),b[1]=e,b[2]=f,b[3]=a,b[4]=g):g=b[4];return g}g["default"]=a}),98);
__d("MWEBOnboardingDismissOnboardingUpsellsInRelay",["CometRelay","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.environment,e=a.upsellsToDismiss;d("CometRelay").commitLocalUpdate(b,function(a){a=a.getRoot().getLinkedRecord("viewer");if(a==null){c("FBLogger")("labyrinth_web").mustfix("[labyrinth][onboarding] A viewer record does not exist when dismissing softblocks.");return}switch(e){case"softblocks":a.setValue(!0,"is_eb_onboarding_softblock_hardblock_dismissed");break;case"all":a.setValue(!0,"is_eb_onboarding_upsells_dismissed");break}})}g.dismissOnboardingUpsellsInRelayStore=a}),98);
__d("MWEncryptedBackupsCreateExtraVirtualDeviceDeferred",["FBLogger","I64","LSEncryptedBackupsCreateVirtualDeviceActionType","LSEncryptedBackupsOpStatus","LSEncryptedBackupsRecoveryCodeStatus","LSIntEnum","ReQL","promiseDone","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MWEncryptedBackupsCreateExtraVirtualDevice").__setRef("MWEncryptedBackupsCreateExtraVirtualDeviceDeferred");function a(a){var b=a.actionType,e=b===void 0?c("LSEncryptedBackupsCreateVirtualDeviceActionType").INSERT:b,f=a.db,g=a.onFailure,k=a.onSuccess;j.onReady(function(a){c("promiseDone")(a.initializeCreateExtraVirtualDeviceStoredProcedure(f,(h||(h=d("I64"))).of_int32(e)),function(a){a=a[0];if(!(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsOpStatus").SUCCESS)))return g();var b=f.tables.secure_encrypted_backups_recovery_code_status.subscribe(function(){c("promiseDone")(d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(f.tables.secure_encrypted_backups_recovery_code_status)),function(a){if(a==null)return;if(a.length!==1)return;a=a[0].recoveryCodeStatus;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsRecoveryCodeStatus").VALID))){b();return k()}else if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsRecoveryCodeStatus").INVALID))){b();return g()}else return})})},function(){c("FBLogger")("labyrinth_web").mustfix("Error while creating extra virtual device.");return g()})})}g.encryptedBackupsCreateExtraVirtualDeviceDeferred=a}),98);
__d("MWEncryptedBackupsGenerateRecoveryCode",["Base64Utils","I64","LSFactory","LSGenerateRecoveryCodeStoredProcedure"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.db,e=a.virtualDeviceType;return b.runInTransaction(function(a){return c("LSGenerateRecoveryCodeStoredProcedure")(c("LSFactory")(a),{virtualDeviceType:(h||(h=d("I64"))).of_int32(e)})},"readwrite",void 0,void 0,f.id+":31").then(function(a){var b=a[0],c=a[1];a=a[2];return{recoveryCode:b,sprocResult:c,virtualDeviceId:a!=null?d("Base64Utils").fromArrayBuffer(a):void 0}})}g.encryptedBackupsGenerateRecoveryCode=a}),98);
__d("MWEncryptedBackupsOnboardingType",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["WEB_ONLY_ONBOARDING","NEW_USER_ONBOARDING"]);c=a;f["default"]=c}),66);
__d("VestaBackupSecretRegister",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=c("requireDeferred")("E2EEBackupSecretRegisterModule").__setRef("VestaBackupSecretRegister"),i=c("requireDeferred")("VestaServerGraphQLRegisterProvider").__setRef("VestaBackupSecretRegister");async function a(a){var b=a.isAlreadyRegistered;b=b===void 0?!1:b;var c=a.environment;a=a.input;var d=await Promise.all([i.load(),h.load()]),e=d[0],f=e.beginRegister,g=e.finishRegister;e=e.initRegister;d=d[1];var j=d.registerBackupSecret;d=d.reRegisterBackupSecret;f=[{beginRegister:f,finishRegister:g,initRegister:e},a,{environment:c}];return b?d.apply(void 0,f):j.apply(void 0,f)}g.vestaBackupSecretRegister=a}),98);