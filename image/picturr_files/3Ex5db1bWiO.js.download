;/*FB_PKG_DELIM*/

__d("MWPOneToOneThreadBlockedContext.react",["I64","Int64Hooks","LSContactBlockedByViewerStatus","LSIntEnum","MWV2OneToOneThreadBlockedContext.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react");function a(a){var b=d("react-compiler-runtime").c(7),e=a.children,f=a.participants,g=a.thread,h;b[0]!==f||b[1]!==g.threadType?(a=function(){if(!((i||(i=d("I64"))).equal(g.threadType,(j||(j=d("LSIntEnum"))).ofNumber(1))||(i||(i=d("I64"))).equal(g.threadType,(j||(j=d("LSIntEnum"))).ofNumber(15))))return!1;var a={contents:!1};f.forEach(function(b,e,f){if(!(i||(i=d("I64"))).equal(b[1].blockedByViewerStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))){a.contents=!0;return}});return a.contents},h=[g.threadType,f],b[0]=f,b[1]=g.threadType,b[2]=a,b[3]=h):(a=b[2],h=b[3]);a=d("Int64Hooks").useMemoInt64(a,h);b[4]!==a||b[5]!==e?(h=k.jsx(d("MWV2OneToOneThreadBlockedContext.react").MWV2OneToOneThreadBlockedContext,{blocked:a,children:e}),b[4]=a,b[5]=e,b[6]=h):h=b[6];return h}g["default"]=a}),98);
__d("MWV2SeenHead.react",["GenderConst","I64","LSIntEnum","MWMessageDeliveryStatus","getLSMediaContactProfilePictureUrl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){var b,e=a[0];a=a[1];return{gender:c("GenderConst").NOT_A_PERSON,id:(h||(h=d("I64"))).to_string(a.id),imageSrc:c("getLSMediaContactProfilePictureUrl")(a),name:(b=e.nickname)!=null?b:a.name,timestamp:h.to_float(e.readActionTimestampMs)}}function a(a,b){var c={contents:(h||(h=d("I64"))).zero};a.forEach(function(a,e,f){e=a[0];if(!(h||(h=d("I64"))).equal(e.contactId,b)&&(h||(h=d("I64"))).gt(e.deliveredWatermarkTimestampMs,c.contents)){c.contents=e.deliveredWatermarkTimestampMs;return}});return c.contents}function b(a){return new Set([(h||(h=d("I64"))).to_string(a)])}function e(a,b,c,e,f,g){var k=[];b.forEach(function(b,e,f){if(c.has(e)||a.isAdminMessage)return;if(!(h||(h=d("I64"))).equal(a.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2)))return;f=b[0];var l=(h||(h=d("I64"))).equal(a.senderId,f.contactId);f=h.le(a.timestampMs,f.readWatermarkTimestampMs);if(l||f){k.push(j(b));if(!g){c.add(e);return}else return}});var l=k.length===0&&c.size===1;if(k.length<=0)if((h||(h=d("I64"))).equal(a.senderId,f))return d("MWMessageDeliveryStatus").getDeliveryStatusForMessageSentByYou(a,e,l);else return{type:"NoneStatus"};if(!g)if(k.length>1)return{heads:k,type:"MultipleSeenHeads"};else return{head:k[0],type:"SingleSeenHead"};f=k.length===b.size-1;return{delivered:f,heads:k,type:"DeliveredAndRead"}}g.calculateMaxDeliveredTimestamp=a;g.makeExistingSeenHeads=b;g.deliveryStatusForMessage=e}),98);
__d("MWPBaseMessageList_DEPRECATED",["BaseHeadingContextWrapper.react","CometHideableComponentExperiment.react","LSMessagingThreadTypeUtil","MWPActor.react","MWPMessageAuthor.react","MWPOneToOneThreadBlockedContext.react","MWV2SeenHead.react","gkx","justknobx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={backgroundColor:{backgroundColor:"x1eb86dx",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(10),e=a.children,f=a.messages,g=a.participants,h=a.renderRow;a=a.thread;var k=d("MWPActor.react").useActor(),l;if(b[0]!==k||b[1]!==e||b[2]!==f||b[3]!==g||b[4]!==h||b[5]!==a){l=Symbol["for"]("react.early_return_sentinel");bb0:{var m=d("MWV2SeenHead.react").calculateMaxDeliveredTimestamp(g,k),n=d("MWV2SeenHead.react").makeExistingSeenHeads(k),o=d("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),p=[];for(var q=f.length-1|0;q>=0;--q){var r=q===0?void 0:f[q-1|0],s=q>=(f.length-1|0)?void 0:f[q+1|0],t=f[q],u=d("MWV2SeenHead.react").deliveryStatusForMessage(t,g,n,m,k,o);p.push(i.jsx(c("CometHideableComponentExperiment.react"),{callingSurface:"thread_view",disableHiding:!0,unmountXStyle:j.backgroundColor,children:i.jsx(d("MWPMessageAuthor.react").MWPMessageAuthor,{contactId:t.senderId,threadKey:t.threadKey,children:h({message:t,nextMessage:s,prevMessage:r,rowIndexFromBottom:c("gkx")("7810")?f.length-1-q:0,status:u})})},c("justknobx")._("2310")?t.offlineThreadingId:t.messageId))}if(p.length===0){l=null;break bb0}else{b[7]===Symbol["for"]("react.memo_cache_sentinel")?(s={className:"x1ja2u2z"},b[7]=s):s=b[7];r=i.jsx(c("MWPOneToOneThreadBlockedContext.react"),{participants:g,thread:a,children:e(p.reverse())});b[8]!==r?(u=i.jsx(c("BaseHeadingContextWrapper.react"),{children:i.jsx("div",babelHelpers["extends"]({},s,{children:r}))}),b[8]=r,b[9]=u):u=b[9];l=u;break bb0}}b[0]=k;b[1]=e;b[2]=f;b[3]=g;b[4]=h;b[5]=a;b[6]=l}else l=b[6];if(l!==Symbol["for"]("react.early_return_sentinel"))return l}g["default"]=a}),98);
__d("MWPinnedMessageList.react",["BaseTheme.react","CometPageletWithDiv.react","I64","LSMessagingThreadTypeUtil","MAWMessageListRow.react","MWBlockingProtectionContext.react","MWMessageListDisplayContext.react","MWMessageRow.react","MWPBaseMessageList_DEPRECATED","MWPMessageListFocusTable.react","MWPThreadCapabilitiesContext","MWV2MessageActionsVisibility.react","MWXColumn.react","MWXColumnItem.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useMWPAriaLabelForMessageListGrid","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));b=i;b.useMemo;var l=b.useState,m={expand:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",maxWidth:"x193iq5w",$$css:!0}},n={dark:{"mwp-message-row-background":"var(--card-background)"},light:{"mwp-message-row-background":"var(--card-background)"},type:"VARIABLES"};function o(a,b){var c=d("react-compiler-runtime").c(9),e;c[0]!==b.tables.contacts||c[1]!==b.tables.participants||c[2]!==a.threadKey?(e=function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(b.tables.contacts))},c[0]=b.tables.contacts,c[1]=b.tables.participants,c[2]=a.threadKey,c[3]=e):e=c[3];var g;c[4]!==b||c[5]!==a?(g=[b,a],c[4]=b,c[5]=a,c[6]=g):g=c[6];e=d("ReQLSuspense").useArray(e,g,f.id+":70");c[7]!==e?(g=e.reduce(p,new Map()),c[7]=e,c[8]=g):g=c[8];return g}function p(a,b){var c=b[0];b=b[1];return a.set((j||(j=d("I64"))).to_string(b.id),[c,b])}function a(a){var b=d("react-compiler-runtime").c(22),e=a.messages,f=a.thread;a=(h||(h=c("useReStore")))();a=o(f,a);var g=c("useMWPAriaLabelForMessageListGrid")(f),i;b[0]!==f.threadType?(i=d("LSMessagingThreadTypeUtil").isArmadilloSecure(f.threadType),b[0]=f.threadType,b[1]=i):i=b[1];var p=i,r=d("MWV2MessageActionsVisibility.react").useStopHoveringRef();i=f.threadType;var s=i;b[2]!==s?(i=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(s),b[2]=s,b[3]=i):i=b[3];var t=i;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(i={current:null},b[4]=i):i=b[4];var u=i;i=l("");var v=i[0],w=i[1];b[5]!==t||b[6]!==p||b[7]!==v||b[8]!==r||b[9]!==f||b[10]!==s?(i=function(a){var b=a.message,e=a.messageAssociatedData,g=a.nextMessage,h=a.prevMessage;a=a.rowIndexFromBottom;var i=p?(j||(j=d("I64"))).equal(f.threadKey,b.threadKey):!1;return i?k.jsx(c("MAWMessageListRow.react"),{domElementRef:u,entryPoint:"pinned_message_list",messageAssociatedData:e,modal:v,row:{message:b,nextMessage:g,prevMessage:h},rowIndexFromBottom:a,thread:f}):k.jsx(d("MWMessageRow.react").MWMessageRow,{domElementRef:u,entryPoint:"pinned_message_list",hasMessageEmphasisRing:!1,isModal:v===b.messageId,isSecureMessage:i,message:b,nextMessage:g,prevMessage:h,rowIndexFromBottom:a,stopHoveringRef:r,threadType:s,useReactionsV2:t})},b[5]=t,b[6]=p,b[7]=v,b[8]=r,b[9]=f,b[10]=s,b[11]=i):i=b[11];var x;b[12]!==g||b[13]!==v||b[14]!==f?(x=function(a){return k.jsx("div",babelHelpers["extends"]({className:"x1hq5gj4"},{children:k.jsx(d("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWPinnedMessageList",children:k.jsx(d("MWPThreadCapabilitiesContext").Provider,{thread:f,children:k.jsx(c("MWBlockingProtectionContext.react").Provider,{children:k.jsx(c("MWPMessageListFocusTable.react"),{ariaLabel:g,modal:v,setModal:w,children:k.jsx(c("MWXColumn.react"),{hasDividers:!0,spacing:8,children:a.map(q)})})})})})}))},b[12]=g,b[13]=v,b[14]=f,b[15]=x):x=b[15];var y;b[16]!==e||b[17]!==a||b[18]!==i||b[19]!==x||b[20]!==f?(y=k.jsx(d("MWMessageListDisplayContext.react").MWMessageListDisplayContextProvider,{value:"pinnedMessages",children:k.jsx(c("BaseTheme.react"),{config:n,xstyle:m.expand,children:k.jsx(c("MWPBaseMessageList_DEPRECATED"),{messages:e,participants:a,renderRow:i,thread:f,children:x})})}),b[16]=e,b[17]=a,b[18]=i,b[19]=x,b[20]=f,b[21]=y):y=b[21];return y}function q(a,b){return k.jsx(c("MWXColumnItem.react"),{children:a},"pin_mes_"+b)}q.displayName=q.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPinnedMessagesInterstitialIcon.react",["ix","CometImageFromIXValue.react","react","react-compiler-runtime","stylex","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");function a(a){var b=d("react-compiler-runtime").c(9),e=a.alt,f=a.ref;a=a.xstyle;var g=c("useCurrentDisplayMode")();g=g==="dark";var j;b[0]!==g?(j=g?h("210429"):h("210430"),b[0]=g,b[1]=j):j=b[1];g=j;b[2]!==e||b[3]!==f||b[4]!==g?(j=k.jsx(c("CometImageFromIXValue.react"),{alt:e,objectFit:"cover",ref:f,source:g}),b[2]=e,b[3]=f,b[4]=g,b[5]=j):j=b[5];e=j;b[6]!==e||b[7]!==a?(f=a==null?e:k.jsx("div",babelHelpers["extends"]({},(i||(i=c("stylex"))).props(a),{children:e})),b[6]=e,b[7]=a,b[8]=f):f=b[8];return f}g["default"]=a}),98);
__d("MWPinnedMessagesDialogNullState.react",["fbt","MDSTextPairing.react","MWPinnedMessagesInterstitialIcon.react","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=h._(/*BTDS*/"No pinned messages"),l=h._(/*BTDS*/"Messages pinned from this chat will appear here");function a(){var a=d("react-compiler-runtime").c(3),b,e;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b={className:"x6s0dn4 x1q0q8m5 x1qhh985 x18b5jzi x10w94by x1t7ytsu x14e42zd x13fuv20 x972fbf x9f619 x78zum5 xdt5ytf x1iyjqo2 xs83m0k x5yr21d xl56j7k xat24cr x14z9mp x1lziwak xdj266r x2lwn1j xeuugli x18d9i69 x64bnmy x13jy36j xexx8yu x1n2onr6 xh8yej3 x1ja2u2z"},e=j.jsx("div",babelHelpers["extends"]({className:"xsag5q8 x1oysuqx"},{children:j.jsx(c("MWPinnedMessagesInterstitialIcon.react"),{})})),a[0]=b,a[1]=e):(b=a[0],e=a[1]);a[2]===Symbol["for"]("react.memo_cache_sentinel")?(b=j.jsxs("div",babelHelpers["extends"]({},b,{children:[e,j.jsx(c("MDSTextPairing.react"),{body:j.jsx("div",babelHelpers["extends"]({className:"x1e56ztr x1xmf6yo"},{children:l})),bodyColor:"tertiary",headline:k,headlineColor:"secondary",level:4,reduceEmphasis:!0,textAlign:"center"})]})),a[2]=b):b=a[2];return b}g["default"]=a}),226);
__d("MWPinnedMessageListContainer.react",["MWPinnedMessageList.react","MWPinnedMessagesDialogNullState.react","MWXRow.react","MWXRowItem.react","MWXScrollableArea.react","MWXSpinner.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useMAWFetchSecureMessageByPinnedExternalId","useMWFetchMessageByPinnedMessageId","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={scrollHeight:{height:"x5yr21d",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(16),e=a.threadKey,g=(h||(h=c("useReStore")))();b[0]!==g.tables.threads||b[1]!==e?(a=function(){return d("ReQL").fromTableAscending(g.tables.threads).getKeyRange(e)},b[0]=g.tables.threads,b[1]=e,b[2]=a):a=b[2];var i;b[3]!==g||b[4]!==e?(i=[g,e],b[3]=g,b[4]=e,b[5]=i):i=b[5];a=d("ReQLSuspense").useFirst(a,i,f.id+":48");i=c("useMWFetchMessageByPinnedMessageId")(e);var n=c("useMAWFetchSecureMessageByPinnedExternalId")(e);if(b[6]!==i||b[7]!==n){var o=n.concat(i),p=[];o=o.reduce(m,p);b[6]=i;b[7]=n;b[8]=o}else o=b[8];p=o;b[9]!==i?(n=i.some(l),b[9]=i,b[10]=n):n=b[10];o=n;b[11]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"x1egiwwb"},b[11]=i):i=b[11];b[12]!==o||b[13]!==p||b[14]!==a?(n=j.jsx("div",babelHelpers["extends"]({},i,{children:p.length===0&&!o?j.jsx(c("MWPinnedMessagesDialogNullState.react"),{}):j.jsx(c("MWXScrollableArea.react"),{expanding:!1,horizontal:!1,xstyle:k.scrollHeight,children:j.jsxs(j.Fragment,{children:[a&&j.jsx(c("MWPinnedMessageList.react"),{messages:p,thread:a}),o&&j.jsx(c("MWXRow.react"),{align:"center",children:j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXSpinner.react"),{color:"disabled_DEPRECATED",size:24})})})]})})})),b[12]=o,b[13]=p,b[14]=a,b[15]=n):n=b[15];return n}function l(a){return a==null}function m(a,b){return b!=null?[].concat(a,[b]):a}g["default"]=a}),98);